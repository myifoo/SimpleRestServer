# 1 mobiledb

hsqldb admin gui console :  java -cp hsqldb.jar org.hsqldb.util.DatabaseManagerSwing

> 注意： 文件数据库不支持多连接，当程序正常运行时，将无法通过该 gui 程序连接到数据库；

url:jdbc:hsqldb:file:hsqldb/mobiledb
username: muser
password: muser

## 1.1 customer

CREATE TABLE CLOUD_CUSTOMER (
        CUSTID INTEGER, 
        CUSTCODE VARCHAR(32) PRIMARY KEY, 
        CUSTTYPE INTEGER, 
        REGISTERSOURCE INTEGER, 
        CUSTNAME VARCHAR(255), 
        USERID VARCHAR(32),
        USERNAME VARCHAR(32), 
        USERALIAS VARCHAR(32), 
        MOBILE VARCHAR(15), 
        EMAIL VARCHAR(100)
)

## 1.2 order

CREATE TABLE CLOUD_ORDER (
        applyno VARCHAR(64),
        ecordercode VARCHAR(32) PRIMARY KEY,
        opttype INTEGER,
        trial BOOLEAN,
        bossorderid VARCHAR(64),
        custcode VARCHAR(32),
        productcode VARCHAR(32),
        begintime BIGINT,
        endtime BIGINT,
        productparas VARCHAR(8192),
        services VARCHAR(8192)
)

## 1.3 request

CREATE TABLE CLOUD_REQUEST (
        id INTEGER GENERATED BY DEFAULT AS IDENTITY,
        type VARCHAR(10),
        applyno VARCHAR(64),
        ecordercode VARCHAR(32),
        content VARCHAR(8192),
        sign VARCHAR(255),
        timestamp BIGINT
)


# 2 test

## 2.1 apply

http://localhost:9001/cloud/service/apply?timestamp=1232413432&sign=wrewetqwe213123123efsdgfdsgwe

{
    "applyno":"CIDC-O-DDF12ADB96874484BF2FA8DD8F06111B",
    "ecordercode":"121243544",
    "opttype":0,
    "trial":0,
    "bossorderid":12312434,
    "custid":12312312,
    "custcode":"21436575564",
    "custtype":2,
    "registersource":0,
    "custname":"中国移动",
    "userid":1001,
    "username":"用户名",
    "useralias":"姓名",
    "mobile":"13800138000",
    "email":"13800138000@139.com",
    "productcode":"2121212",
    "begintime":1411718510123,
    "endtime":1411718510123,
    "productparas":[
        {
            "key":"sad",
            "value":"111"
        },
        {
            "key":"qweqw",
            "value":"222"
        }
    ],
    "services": [
        {
            "opttype":0,
            "code":"111",
            "begintime":1411718510123,
            "endtime":1411718510123,
            "serviceparas":[
                {
                    "key":"sad",
                    "value":"111"
                },
                {
                    "key":"qweqw",
                    "value":"222"
                }
            ]
        }
    ]
}


## 2.2 update

http://localhost:9001/cloud/service/update?timestamp=1232413432&sign=wrewetqwe213123123efsdgfdsgwe

{
    "applyno":"CIDC-O-DDF12ADB96874484BF2FA8DD8F06111B",
    "ecordercode":"121243544",
    "opttype":0,
    "custid":12312312,
    "custcode":"21436575564",
    "productcode":"2121212",
    "operatime":1411718510123,
    "effecttime":1411718510123
}


# 3 build

mvn assembly:assembly 
> 生成包含所有依赖包的jar；

# others

Spring Rest + Embed Tomcat + HSQLDB